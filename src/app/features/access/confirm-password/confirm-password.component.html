<div class="arrow" (click)="goBackToEmailConfirm()">
  <svg
    width="16"
    height="16"
    viewBox="0 0 16 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M6.875 15.3L0.275 8.69996C0.175 8.59996 0.104 8.49163 0.0619998 8.37496C0.0206665 8.25829 0 8.13329 0 7.99996C0 7.86663 0.0206665 7.74163 0.0619998 7.62496C0.104 7.50829 0.175 7.39996 0.275 7.29996L6.875 0.69996C7.05833 0.516627 7.28733 0.420627 7.562 0.411961C7.83733 0.403961 8.075 0.49996 8.275 0.69996C8.475 0.883294 8.57933 1.11229 8.588 1.38696C8.596 1.66229 8.5 1.89996 8.3 2.09996L3.4 6.99996H14.575C14.8583 6.99996 15.096 7.09563 15.288 7.28696C15.4793 7.47896 15.575 7.71663 15.575 7.99996C15.575 8.28329 15.4793 8.52063 15.288 8.71196C15.096 8.90396 14.8583 8.99996 14.575 8.99996H3.4L8.3 13.9C8.48333 14.0833 8.57933 14.3166 8.588 14.6C8.596 14.8833 8.5 15.1166 8.3 15.3C8.11667 15.5 7.88333 15.6 7.6 15.6C7.31667 15.6 7.075 15.5 6.875 15.3Z"
      fill="black"
    />
  </svg>
</div>

<form [formGroup]="newPassword" (ngSubmit)="onSubmit()">
  <h1> Passwort zurücksetzen</h1>

  <div class="input-container">
    <app-custom-input
      type="password"
      name="password"
      id="password"
      placeholder="Neues Passwort"
      formControlName="newPassword"
    >
      <svg
        icon
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask
          id="mask0_124835_14644"
          style="mask-type: alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="24"
          height="24"
        >
          <rect width="24" height="24" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_124835_14644)">
          <path
            d="M6 22C5.45 22 4.97933 21.8043 4.588 21.413C4.196 21.021 4 20.55 4 20V10C4 9.45 4.196 8.979 4.588 8.587C4.97933 8.19567 5.45 8 6 8H7V6C7 4.61667 7.48767 3.43733 8.463 2.462C9.43767 1.48733 10.6167 1 12 1C13.3833 1 14.5627 1.48733 15.538 2.462C16.5127 3.43733 17 4.61667 17 6V8H18C18.55 8 19.021 8.19567 19.413 8.587C19.8043 8.979 20 9.45 20 10V20C20 20.55 19.8043 21.021 19.413 21.413C19.021 21.8043 18.55 22 18 22H6ZM6 20H18V10H6V20ZM12 17C12.55 17 13.021 16.8043 13.413 16.413C13.8043 16.021 14 15.55 14 15C14 14.45 13.8043 13.979 13.413 13.587C13.021 13.1957 12.55 13 12 13C11.45 13 10.9793 13.1957 10.588 13.587C10.196 13.979 10 14.45 10 15C10 15.55 10.196 16.021 10.588 16.413C10.9793 16.8043 11.45 17 12 17ZM9 8H15V6C15 5.16667 14.7083 4.45833 14.125 3.875C13.5417 3.29167 12.8333 3 12 3C11.1667 3 10.4583 3.29167 9.875 3.875C9.29167 4.45833 9 5.16667 9 6V8Z"
            style="fill: var(--icon-color)"
          />
        </g>
      </svg>
    </app-custom-input>

    @if (newPassword.get('newPassword')?.invalid && newPassword.get('newPassword')?.touched) {
      @if (newPassword.get('newPassword')?.errors?.['required']) {
        <small>*Passwort ist erforderlich.</small>
      }
      @if (newPassword.get('newPassword')?.errors?.['minlength']) {
        <small>*Passwort muss mindestens 6 Zeichen lang sein.</small>
      }
    }
  </div>

  <div class="input-container">
    <app-custom-input
      type="password"
      name="confirmPassword"
      id="confirmPassword"
      placeholder="Neues Kennwort bestätigen"
      formControlName="conPassword"
    >
      <svg
        icon
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask
          id="mask0_124835_14644"
          style="mask-type: alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="24"
          height="24"
        >
          <rect width="24" height="24" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_124835_14644)">
          <path
            d="M6 22C5.45 22 4.97933 21.8043 4.588 21.413C4.196 21.021 4 20.55 4 20V10C4 9.45 4.196 8.979 4.588 8.587C4.97933 8.19567 5.45 8 6 8H7V6C7 4.61667 7.48767 3.43733 8.463 2.462C9.43767 1.48733 10.6167 1 12 1C13.3833 1 14.5627 1.48733 15.538 2.462C16.5127 3.43733 17 4.61667 17 6V8H18C18.55 8 19.021 8.19567 19.413 8.587C19.8043 8.979 20 9.45 20 10V20C20 20.55 19.8043 21.021 19.413 21.413C19.021 21.8043 18.55 22 18 22H6ZM6 20H18V10H6V20ZM12 17C12.55 17 13.021 16.8043 13.413 16.413C13.8043 16.021 14 15.55 14 15C14 14.45 13.8043 13.979 13.413 13.587C13.021 13.1957 12.55 13 12 13C11.45 13 10.9793 13.1957 10.588 13.587C10.196 13.979 10 14.45 10 15C10 15.55 10.196 16.021 10.588 16.413C10.9793 16.8043 11.45 17 12 17ZM9 8H15V6C15 5.16667 14.7083 4.45833 14.125 3.875C13.5417 3.29167 12.8333 3 12 3C11.1667 3 10.4583 3.29167 9.875 3.875C9.29167 4.45833 9 5.16667 9 6V8Z"
            style="fill: var(--icon-color)"
          />
        </g>
      </svg>
    </app-custom-input>

    @if (newPassword.get('conPassword')?.invalid && newPassword.get('conPassword')?.touched) {
      @if (newPassword.get('conPassword')?.errors?.['required']) {
        <small>*Passwort ist erforderlich.</small>
      }
      @if (newPassword.get('conPassword')?.errors?.['minlength']) {
        <small>*Passwort muss mindestens 6 Zeichen lang sein.</small>
      }
    }

    @if (newPassword.errors?.['passwordMismatch'] && newPassword.get('conPassword')?.touched) {
      <small class="mismatch">*Die Passwörter stimmen nicht überein.</small>
    }
  </div>

  <div class="btn-container">
    <app-button type="submit" [disabled]="newPassword.invalid">Passwort ändern</app-button>
  </div>
</form>

<app-success-indicator [visible]="isConfirmationVisible">Ihr Passwort wurde geändert</app-success-indicator>
