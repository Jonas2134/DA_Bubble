<main (click)="closeWindow()">
    <section (click)="$event.stopPropagation()">
        <header>
            <div>
                <img src="/assets/icons/hashtag.svg">
                <h1>{{ channelData?.cName}}</h1>
            </div>
            <button (click)="closeWindow()" class="closeChannelLeave">
                <div class="material-symbols closeIcon">close</div>
            </button>
        </header>
        <div class="scrollContainer">
            @if (editMode) {
                <div [ngClass]="{ 'fade-in': hasInteractedName && isVisibleName, 'fade-out': hasInteractedName && !isVisibleName }" class="nameBox">
                    <div class="boxEdit">
                        <h3>Channel-Name</h3>
                        <button (click)="toggleEdit()">Bearbeiten</button>
                    </div>
                    <div class="channelHashtagName">
                        <img src="/assets/icons/hashtag.svg">
                        <span>{{ channelData?.cName}}</span>
                    </div>
                </div>
            }
            @else{
                <div [ngClass]="{ 'fade-in': hasInteractedName && isVisibleName, 'fade-out': hasInteractedName && !isVisibleName }"  class="nameSaveBox">
                    <div class="saveBox">
                        <h3>Channel-Name</h3>
                        <button (click)="saveNewName()">Speichern</button>
                    </div>
                    <div class="editChannelName" >
                        <img src="/assets/icons/hashtag.svg">
                        <input [(ngModel)]="editedChannelName" [placeholder]="editedChannelName"/>
                    </div>
                </div>
            }
            @if (editDescription) {
                <div [ngClass]="{ 'fade-in': hasInteracted && isVisible, 'fade-out': hasInteracted && !isVisible }" class="descriptionBox">
                    <div class="descriptionText">
                        <div class="boxEdit">
                            <h3>Beschreibung</h3>
                            <button (click)="toggleDescription()">Bearbeiten</button>
                        </div>
                        <div class="descriptionBoxText">{{ channelData?.cDescription}}</div>
                    </div>
                    <div class="creatorXLine">
                        <div class="xLine"></div>
                        <div class="userCreator">
                            <h3>Erstellt von</h3>
                            <span>{{ createdByUserName }}</span>
                        </div>
                    </div>
                </div>
            }
            @else {
                <div [ngClass]="{ 'fade-in': hasInteracted && isVisible, 'fade-out': hasInteracted && !isVisible }" class="descriptionSaveOutBox">
                    <div class="descriptionSaveBox">
                        <div class="descriptionText">
                            <div class="saveBox">
                                <h3>Beschreibung</h3>
                                <button (click)="toggleDescription(); saveDescription()">Speichern</button>
                            </div>
                            <div class="inputDescription">
                                <textarea [(ngModel)]="editedDescription" placeholder="Dein Text hier" type="text"></textarea>
                            </div>
                        </div>
                        <div class="xLineSave"></div>
                        <div class="creatorBox">
                            <div class="userCreator">
                                <h3>Erstellt von</h3>
                                <span>{{ createdByUserName }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            }
            <div class="memberListMobile">
                <app-device-visible mode="mobilBig">
                    <h1 class="mobileHeadlineMember">Mitglieder</h1>
                    <app-member-list
                    [channelMembers]="channelMembers"
                    [activeUserId]="activeUserId"
                    (addMember)="addMember.emit()"
                    (showProfil)="showProfil.emit($event)"
                  ></app-member-list>
                </app-device-visible>
            </div>
            <div class="channelLeaveButton">
                <button (click)="closeWindow()">Channel verlassen</button>
            </div>
        </div>
    </section>
</main>

@if (isChannelMemberProfilOpen) {
    <app-profil
      [activeUserId]="activeUserId"
      [userImage]="activChannelMemberProfil?.uUserImage"
      [userName]="activChannelMemberProfil?.uName"
      [userEmail]="activChannelMemberProfil?.uEmail"
      [userStatus]="activChannelMemberProfil?.uStatus"
      #profilRef
      size="big"
      [showButton]="activeUserId !== activChannelMemberProfil?.uId"
      (close)="showProfil.emit()"
    ></app-profil>

}
@if (newChannelMembers) {
    <div (click)="closeAddMember()" class="memberAdd" #memberAddWrapper>
        <app-add-new-members 
        [channelMembers]="channelMembers"
        [activeUserId]="activeUserId"
        [channelId]="channelId"
        [channelName]="channelData?.cName"
        [showInput]="true"
      ></app-add-new-members>
    </div>
  }
